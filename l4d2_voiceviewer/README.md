# [Voice Viewer](https://forums.alliedmods.net/showthread.php?t=344047)

## Features
- Show who is talking (EMS HUD, Center text, Hint text).

- Limit voice time.

- (Optional)When a player starts speaking or stops speaking, print a message in the chat that is instant.

## ConVars
~~~
// This file was auto-generated by SourceMod (v1.12.0.7043)
// ConVars for plugin "l4d2_voiceviewer.smx"


// 1 = Draw a black background for the selected EMS HUD Slot.(Check XYWH)
// Note: You need to rejoin the target server for this change to take effect on the client.
// -
// Default: "0"
l4d2_voiceviewer_emshud_HUDBG "0"

// EMS HUD Slot used for display, See:
// https://developer.valvesoftware.com/wiki/L4D2_EMS/Appendix:_HUD
// https://github.com/oblivcheck/l4d2_plugins/blob/eb43f95fd4e60bbfdaff84616221ac8367d2ec7f/l4d2_voiceviewer/scripting/l4d2_voiceviewer.sp#L46-L90
// -
// Default: "1"
l4d2_voiceviewer_emshud_Slot "1"

// X,Y position and Width and Height, See:
// https://developer.valvesoftware.com/wiki/L4D2_EMS/Appendix:_HUD
// -
// Default: "0.0 0.75 1.0 0.05"
l4d2_voiceviewer_emshud_XYWH "0.0 0.75 1.0 0.05"

// Enable or Disable
// -
// Default: "1"
l4d2_voiceviewer_enable "1"

// Check interval.
// -
// Default: "0.5"
l4d2_voiceviewer_interval "0.5"

// Time limit for sending voice.
// Time(s) = l4d2_voiceviewer_interval * l4d2_voiceviewer_limit
// -
// Default: "90"
l4d2_voiceviewer_limit "90"

// If the byte length of the player's name exceeds a certain value, it will be truncated.
// Int Value, 0 = disable, Do NOT larger than 48.
// -
// Default: "0"
l4d2_voiceviewer_name_max_length "0"

// Time to wait for restrictions to be lifted
// Time(s) = l4d2_voiceviewer_interval * l4d2_voiceviewer_reset
// -
// Default: "90"
l4d2_voiceviewer_reset "90"

// Where to print voice messages?
// 0 = Disable, 1= EMS HUD, 2 = HintText, 4 = CenterText, 8 = when a player starts speaking or stops speaking, print a message in the chat that is instant.
// Add to get all
// -
// Default: "2"
l4d2_voiceviewer_type "2"
~~~

## Translations
- English *(provided by "Peter Brev")*

- Simplified Chinese *(provided by "oblivcheck/Iciaria")*

- French *(provided by "Peter Brev")*

- Russian *(provided by "JustMadMan")*

## Chnages Log
~~~
2024-01-24 (1.6)
        - Fixed: when a player is muted, open or close the micwill still cause messages to appear in the chat. Reported by "S.A.S".

2024-01-23 (1.5)
        - If the value of Cvar "l4d2_voiceviewer_type" contains 8: When a player starts speaking or stops speaking, print a message in the chat that is instant. requested by "S.A.S".
        - If the value of Cvar "l4d2_voiceviewer_name_max_length" is 0, there is no limit to the length of the displayed player name.
        - Cvar default value change.

2023-12-13 (1.4)
        - EMS HUD support, requested by "S.A.S".
        - If the player's name is too long, it will be truncated.
        - New ConVars: l4d2_voiceviewer_name_max_length, l4d2_voiceviewer_emshud_Slot, l4d2_voiceviewer_emshud_XYWH, l4d2_voiceviewer_emshud_HUDBG
        - New config file: data/l4d2_voiceviewer.txt
        - Some code adjustments && ConVar default value adjustments.

2023-10-01 (1.3)
        - Fixed: Client is not in game.

2023-09-28 (1.2)
        - Limits are no longer reset during chapter transitions.
        - Fixed: multiple identical timers accidentally created.
        - Fixed: after the plugin is disable, it will have no effect when it is enabled again.
        - Changed wrong comment: l4d2_voiceviewer_reset(Time(s) = l4d2_voiceviewer_interval * l4d2_voiceviewer_reset).

2023-09-28 (1.1)
        - Added translation files provided by "Peter Brev", including new English translation and French translation.

2023-09-27 (1.0)
        - Initial version.
~~~
